<div class="flex bg-gray-100">
  <app-navbar class="w-64 bg-orange-600 text-white"></app-navbar>
  <div class="p-6 space-y-6">
    <h2 class="text-2xl font-bold text-orange-600">
      Gesti√≥n de Medicamentos por Proveedor
    </h2>

    <div>
      <label class="block font-semibold">Proveedor:</label>
      <select
        [(ngModel)]="nuevo.proveedorId"
        (change)="cargarMedicamentosProveedor(nuevo.proveedorId)"
        name="proveedorId"
        class="border rounded p-2 w-full"
      >
        <option value="0">-- Selecciona un proveedor --</option>
        <option *ngFor="let p of proveedores" [value]="p.id">
          {{ p.nombre }}
        </option>
      </select>
    </div>

    <div>
      <label class="block font-semibold">Medicamento:</label>
      <select
        [(ngModel)]="nuevo.medicamentoId"
        name="medicamentoId"
        class="border rounded p-2 w-full"
      >
        <option value="0">-- Selecciona un medicamento --</option>
        <option *ngFor="let m of medicamentos" [value]="m.id">
          {{ m.nombre }}
        </option>
      </select>
    </div>

    <div>
      <label class="block font-semibold">Precio de Compra:</label>
      <input
        type="number"
        [(ngModel)]="nuevo.precioCompra"
        name="precioCompra"
        placeholder="Precio"
        class="border rounded p-2 w-full"
      />
    </div>

    <button
      (click)="agregar()"
      class="bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700"
    >
      Agregar Producto
    </button>

    <div *ngIf="medicamentosProveedor.length > 0" class="mt-6">
      <h3 class="text-lg font-semibold">Medicamentos del Proveedor</h3>
      <table class="min-w-full border mt-2">
        <thead class="bg-orange-500 text-white">
          <tr>
            <th class="py-2 px-4">Medicamento</th>
            <th class="py-2 px-4">Precio</th>
            <th class="py-2 px-4">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let mp of medicamentosProveedor" class="border-b">
            <td class="py-2 px-4">{{ mp.medicamentoId }}</td>
            <td class="py-2 px-4">{{ mp.precioCompra | currency : "USD" }}</td>
            <td class="py-2 px-4">
              <button
                (click)="eliminar(mp.id!)"
                class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700"
              >
                Eliminar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
